name: Documentation Validation

on:
  push:
    branches: [development, main]
    paths:
      - 'docs/**'
      - 'README.md'
      - 'CHANGELOG.md'
  pull_request:
    paths:
      - 'docs/**'
      - 'README.md'
      - 'CHANGELOG.md'

jobs:
  markdown-lint:
    name: Markdown Linting
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run markdownlint
        uses: DavidAnson/markdownlint-cli2-action@v15
        with:
          globs: |
            **/*.md
            !node_modules
            !.venv
        continue-on-error: true

  link-check:
    name: Link Validation
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Check documentation links
        uses: lycheeverse/lychee-action@v1
        with:
          args: |
            --verbose
            --no-progress
            --exclude-path _archive
            --exclude-path .venv
            --exclude-mail
            '**/*.md'
        continue-on-error: true

  spelling:
    name: Spelling Check
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Check spelling
        uses: crate-ci/typos@master
        with:
          files: docs/ README.md CHANGELOG.md
        continue-on-error: true
